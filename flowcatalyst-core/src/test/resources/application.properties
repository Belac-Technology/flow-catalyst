# Test configuration for integration tests

# H2 in-memory database for unit tests (no Docker required)
# Integration tests that need Postgres can override with PostgresTestResource
quarkus.datasource.db-kind=h2
quarkus.datasource.username=sa
quarkus.datasource.password=
quarkus.datasource.jdbc.url=jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1

# Hibernate Configuration for tests
quarkus.hibernate-orm.log.sql=false
quarkus.hibernate-orm.mapping.format.global=ignore
quarkus.hibernate-orm.database.generation=drop-and-create
quarkus.hibernate-orm.database.generation.create-schemas=true

# Flyway Configuration for tests - disabled for unit tests
# Integration tests can override to enable
quarkus.flyway.migrate-at-start=false
quarkus.flyway.clean-at-start=false
quarkus.flyway.baseline-on-migrate=false

# SQS Configuration (overridden by LocalStackTestResource)
quarkus.sqs.aws.region=us-east-1
quarkus.sqs.sync-client.type=url

# Message Router Configuration
message-router.queue-type=SQS
message-router.sync-interval=5m

# Disable scheduled sync during tests to avoid conflicts
quarkus.scheduler.enabled=false

# Test logging
quarkus.log.level=INFO
quarkus.log.category."tech.flowcatalyst".level=DEBUG
quarkus.log.category."org.testcontainers".level=INFO

# Disable OIDC authentication for tests
quarkus.oidc.enabled=false
quarkus.http.auth.permission.permit-all.paths=/*
quarkus.http.auth.permission.permit-all.policy=permit
